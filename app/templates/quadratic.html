<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Ryan's Super Fancy Movie Revenue Prediction Algorithm</title>
  <meta name="description" content="Movie Revenue Predictor">
  <meta name="author" content="Galvanize DSI">

    <script type="text/javascript" src="{{ url_for('static', filename='jquery.js') }}">  </script>

</head>

<body>

    <h1>Ryan's Super Fancy Movie Revenue Prediction Algorithm</h1>
    <p>This app will predict movie revenues for you!</p>
    <p>Please choose some features below!</p>

    <div>
        <!-- These have id's so that later we can pull out data using js. -->
        <span>Placeholder (dont use this for now):</span> <input id="a"></input>
        <p>
        <span>budget:</span> <input id="b"></input>
        </p>
        <!-- <span>c:</span> <input id="c"></input> -->
    </div>

    <div>
        <span>Genre:</span>
        <select id=genre>
          <option value='Adventure'> Adventure </option>
          <option value='Musical'> Musical </option>
          <option value='Action'> Action </option>
          <option value='Horror'> Horror </option>
          <option value='Drama'> Drama </option>
          <option value='Thriller/Suspense'> Thriller/Suspense </option>
          <option value='Comedy'> Comedy </option>
          <option value='Black Comedy'> Black Comedy </option>
          <option value='Western'> Western </option>
          <option value='Romantic Comedy'> Romantic Comedy </option>
          <option value='Documentary'> Documentary </option>
          <option value='Concert'> Concert</option>
          <option value='Unknown/None'> Unknown/None </option>
        </select>
    </div>

    <div>
        <span>Rating:</span>
        <select id=rating>
          <option value='G'> G</option>
          <option value='PG'> PG </option>
          <option value='PG-13'> PG-13</option>
          <option value='R'> R </option>
          <option value='Not Rated'> Not Rated </option>
        </select>
    </div>

    <!--
    <div>
        <span>Part of Franchise?:</span>
        <select id=franchise>
          <option value='is_franchise'> Yes </option>
          <option value='not_franchise'> No </option>
        </select>
    </div>
    <div>
        <span>Production Method:</span>
        <select id=production_method>
          <option value='live_action'> Live Action </option>
          <option value='ani_and_action'> Animation/Live Action </option>
          <option value='digital_ani'> Digital Animation </option>
          <option value='hand_ani'> Hand Animation </option>
          <option value='stop_motion_ani'> Stop Motion Animation </option>
          <option value='none'> Live Action </option>
          <option value='live_action'> Live Action </option>
        </select>
    </div>
    <div>
        <span>Creative Type:</span>
        <select id=production_method>
          <option value='live_action'> Live Action </option>
          <option value='ani_and_action'> Animation/Live Action </option>
          <option value='digital_ani'> Digital Animation </option>
          <option value='hand_ani'> Hand Animation </option>
          <option value='stop_motion_ani'> Stop Motion Animation </option>
          <option value='none'> Live Action </option>
          <option value='live_action'> Live Action </option>
        </select>
    </div> -->

    <div>
        <button type="button" id="solve">Solve!</button>
    </div>

    <div>
        <!-- The span has an id so that later we can fill in the solution
             using js. -->
        <p><span id="solution"></span> </p>


<script type="text/javascript">
let get_input_coefficients = function() {
  let genre_input = $("select#genre")
  let rating_input = $("select#rating")
    let genre = genre_input.val()
    let budget = $("input#b").val()
    let rating = rating_input.val()
    // let c = $("input#c").val()
    return {'genre': genre,
            'budget': parseInt(budget),
            'rating': rating}
};
let send_coefficient_json = function(coefficients) {
    $.ajax({
        url: '/solve',
        contentType: "application/json; charset=utf-8",
        type: 'POST',
        success: function (data) {
            display_solutions(data);
        },
        data: JSON.stringify(coefficients)
    });
};
let display_solutions = function(solutions) {
    $("span#solution").html(solutions.root_1)
};
$(document).ready(function() {
    $("button#solve").click(function() {
        let coefficients = get_input_coefficients();
        send_coefficient_json(coefficients);
    })
})
</script>

</body>
</html>
